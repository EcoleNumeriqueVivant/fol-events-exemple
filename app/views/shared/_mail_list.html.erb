<div id="mail-alert">
<h4><li class="icon-fire"></li> Recevoir des alertes par mail</h4>
<span id="mail_error" class="help-inline" style="color:red;display:none">* saisir une adresse mail valide</span>
<span id="mail_ok" class="help-inline" style="color:green;display:none">merci pour votre inscription !</span>
<%= form_tag("/add_to_list", :method => "post", :id => "rapid-mainlist", :class => 'well' ) do %>		
<label>Votre Email</label>
<input type="mail" id="mail" type="text" style="width:100%" placeholder="email" >
<button type="submit" class="btn btn-info">Valider</button>
<% end %>
</div>

<script>
	var regExMail = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
	$("#rapid-mainlist").bind("submit", function() {
		   $("#mail_error").hide();
	       var val = $("#mail").val();
	       // alert(val + " : " + regExMail.test(val));
	       if ( regExMail.test(val) == false ) {
	            $("#mail_error").show();
	            return false;
	        } else {
		       $.post("/add_to_list", { mail: val }	, function(data) {
				    $("#mail_ok").show();
				 } );
			}
	 event.preventDefault()
	});
</script>